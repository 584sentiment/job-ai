<!--pages/add-experience/add-experience.wxml-->
<view class="container">
  <scroll-view class="main-content" scroll-y>
    <form bindsubmit="onSubmit">
      <!-- 关联岗位信息 -->
      <view class="form-section card">
        <view class="section-title">关联岗位（可选）</view>
        <picker class="form-picker" name="jobId" bindchange="onJobChange" range="{{jobOptions}}" range-key="label" value="{{jobIndex}}">
          <view class="picker-value">{{jobText || '不关联岗位'}}</view>
        </picker>
        <view class="form-hint">
          <text>💡</text>
          <text>关联后可在岗位详情页查看此面经</text>
        </view>
      </view>

      <!-- 基础信息 -->
      <view class="form-section card">
        <view class="section-title">基础信息</view>

        <view class="form-group">
          <label class="form-label required">公司名称</label>
          <input class="form-input" name="company" placeholder="请输入公司名称" value="{{company}}" />
        </view>

        <view class="form-group">
          <label class="form-label required">岗位名称</label>
          <input class="form-input" name="position" placeholder="如：前端工程师" value="{{position}}" />
        </view>

        <view class="form-group">
          <label class="form-label required">面试轮次</label>
          <picker class="form-picker" name="round" bindchange="onRoundChange" range="{{rounds}}" value="{{roundIndex}}">
            <view class="picker-value">{{round || '请选择'}}</view>
          </picker>
        </view>

        <view class="form-group">
          <label class="form-label">面试日期</label>
          <picker class="form-picker" mode="date" name="date" value="{{date}}" bindchange="onDateChange" end="{{maxDate}}">
            <view class="picker-value">{{date || '请选择日期'}}</view>
          </picker>
        </view>
      </view>

      <!-- 面经内容 -->
      <view class="form-section card">
        <view class="section-title">面经内容</view>

        <view class="form-group">
          <label class="form-label required">面试内容</label>
          <textarea
            class="form-textarea"
            name="content"
            placeholder="请输入面试内容，包括：&#10;1. 面试问题&#10;2. 你的回答&#10;3. 面试官反馈&#10;4. 建议"
            value="{{content}}"
            bindinput="onContentInput"
            maxlength="2000"
          ></textarea>
          <view class="form-counter">{{content.length}}/2000</view>
        </view>

        <view class="form-group">
          <label class="form-label">标签</label>
          <input class="form-input" name="tags" placeholder="如：前端、Vue、算法，用空格分隔" value="{{tags}}" />
        </view>
      </view>

      <!-- 其他选项 -->
      <view class="form-section card">
        <view class="section-title">其他选项</view>

        <view class="form-group">
          <label class="switch-label">
            <text>匿名发布</text>
            <switch name="isAnonymous" checked="{{isAnonymous}}" />
          </label>
          <view class="form-hint">匿名后其他用户无法看到你的信息</view>
        </view>
      </view>

      <!-- 提交按钮 -->
      <view class="bottom-actions">
        <button class="btn btn-secondary" formType="button" bindtap="onCancel">取消</button>
        <button class="btn btn-primary" formType="submit">保存</button>
      </view>
    </form>
  </scroll-view>
</view>
